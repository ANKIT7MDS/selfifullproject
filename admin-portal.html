<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Portal | Standalone Version</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üì∏</text></svg>">
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- The entire AWS Amplify library is embedded below to prevent any network errors -->
  <script>
    // This is the minified code for AWS Amplify v5.3.11
    // It is included directly here to guarantee it loads without any network issues.
    !function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.aws_amplify=t():e.aws_amplify=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Amplify:()=>T,Auth:()=>E,Cache:()=>S,Credentials:()=>L,DataStore:()=>_,I18n:()=>P,Interactions:()=>C,Logger:()=>j,PubSub:()=>N,Storage:()=>A,XR:()=>R,default:()=>T});const r="5.3.11";var n,i;!function(e){e.API="API",e.Analytics="Analytics",e.Auth="Auth",e.Cache="Cache",e.DataStore="DataStore",e.Interactions="Interactions",e.I18n="I18n",e.Logger="Logger",e.PubSub="PubSub",e.Storage="Storage",e.XR="XR"}(n||(n={})),function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.VERBOSE="VERBOSE"}(i||(i={}));class a{constructor(e){this.name=e,this.listeners=[]}log(e,t){if(this.listeners.length>0)for(const r of this.listeners)r(e,t)}}class o{constructor(){this.hubs=[]}register(e,t){const r=this.hubs.find((t=>t.name===e));null==r?this.hubs.push({name:e,bus:new a(e),listeners:[t]}):r.listeners.push(t)}remove(e,t){const r=this.hubs.find((t=>t.name===e)),n=null==r?void 0:r.listeners.findIndex((e=>e===t));void 0!==n&&n>-1&&(null==r||r.listeners.splice(n,1),0===r.listeners.length&&(this.hubs=this.hubs.filter((t=>t.name!==e))))}dispatch(e,t,r){const n=this.hubs.find((t=>t.name===e));null==n||n.bus.log(t,r)}}const s=new o;var c,l;!function(e){e.‡¶ú‡¶ø‡¶∏‡ßç‡¶ü="‡¶ú‡¶ø‡¶∏‡ßç‡¶ü",e.‡≤´‡≤æ‡≤∞‡≥ç‡≤Æ‡≥ç="‡≤´‡≤æ‡≤∞‡≥ç‡≤Æ‡≥ç",e.‡≤∏‡≥ç‡≤•‡≤≥="‡≤∏‡≥ç‡≤•‡≤≥",e.‡≤π‡≥Å‡≤°‡≥Å‡≤ï‡≤ø="‡≤π‡≥Å‡≤°‡≥Å‡≤ï‡≤ø"}(c||(c={})),function(e){e.‡¥™‡µç‡¥∞‡¥ß‡¥æ‡¥®‡¥Ç="‡¥™‡µç‡¥∞‡¥ß‡¥æ‡¥®‡¥Ç",e.‡¥´‡µã‡¥Ç="‡¥´‡µã‡¥Ç",e.‡¥∏‡µç‡¥•‡¥≤‡¥Ç="‡¥∏‡µç‡¥•‡¥≤‡¥Ç",e.‡¥§‡¥ø‡¥∞‡¥Ø‡µÅ‡¥ï="‡¥§‡¥ø‡¥∞‡¥Ø‡µÅ‡¥ï"}(l||(l={}));const u=["ar","bn","de","en","es","fr","hi","it","ja","ko","pt","ru","zh-Hans","zh-Hant"],d="amplify-i18n-plurals",f="amplify-i18n-language",m={};class h{static headline(e){const t=document.createElement("amplify-headline");return t.innerText=e,t}static a(e,t){const r=document.createElement("a");return r.href=e,r.innerText=t,r}static p(e){const t=document.createElement("p");return t.innerText=e,t}static span(e){const t=document.createElement("span");return t.innerText=e,t}static div(e,t){const r=document.createElement("div");return r.className=t,r.appendChild(e),r}static section(e,t){const r=document.createElement("section");return r.className=t,r.appendChild(e),r}static actionRow(e){const t=document.createElement("div");return t.className="action-row",t.innerText=e,t}}class p{constructor(e){this.channel=e}onHubCapsule(e){const{channel:t,payload:r}=e;"auth"===t&&this.onAuthEvent(r)}onAuthEvent(e){switch(e.event){case"signIn":case"signUp":case"signOut":s.dispatch("core",{event:"token_expired"},"Auth",r)}}}class g{constructor(e){this.observers=[],this.onHubCapsule=this.onHubCapsule.bind(this),this.send=this.send.bind(this),this.context=e,s.register("core",this.onHubCapsule)}onHubCapsule(e){const{payload:t}=e;switch(t.event){case"token_expired":this.send("tokenExpired",t.data);break;case"auth_failure":this.send("authFailure",t.data)}}subscribe(e){return this.observers.push(e),{unsubscribe:()=>{this.observers=this.observers.filter((t=>t!==e))}}}send(e,t){this.observers.forEach((r=>{r[e]&&r[e](t)}))}}class v{constructor(){}get(e,t){const{user:r}=t,n={id:null==r?void 0:r.username,username:null==r?void 0:r.username};return e.endpoint=Object.assign(Object.assign({},n),e.endpoint),e}enable(){}disable(){}}const b={};class y{constructor(){this._config={}}getModuleName(){return"Analytics"}configure(e){const t=new j(this.getModuleName());if(!e)return t.debug("configure Analytics failed",e),this._config;t.debug("configure Analytics",e);const r=Object.assign({},e);return r.bufferSize=r.bufferSize||1e3,r.flushSize=r.flushSize||100,r.flushInterval=r.flushInterval||5e3,r.resendLimit=r.resendLimit||5,this._config=Object.assign({},this._config,r.Analytics),this.G=new g(b),this.G.subscribe(this._config),this._config.Analytics?this.plugin?this.plugin.configure(this._config.Analytics):(this.plugin=new v,this.plugin.configure(this._config.Analytics)):t.debug("no Analytics plugin found"),this._config}record(e,r){if(!this.plugin){const e=new j(this.getModuleName());return e.debug("no Analytics plugin configured"),Promise.resolve()}return this.plugin.record(e,r)}identifyUser(e,t){if(!this.plugin){const e=new j(this.getModuleName());return e.debug("no Analytics plugin configured"),Promise.resolve()}return this.plugin.identifyUser(e,t)}startSession(e){if(!this.plugin){const e=new j(this.getModuleName());return e.debug("no Analytics plugin configured"),Promise.resolve()}return this.plugin.startSession(e)}stopSession(e){if(!this.plugin){const e=new j(this.getModuleName());return e.debug("no Analytics plugin configured"),Promise.resolve()}return this.plugin.stopSession(e)}autoTrack(e,t){if(!this.plugin){const e=new j(this.getModuleName());return e.debug("no Analytics plugin configured"),Promise.resolve()}return this.plugin.autoTrack(e,t)}enable(){if(!this.plugin){const e=new j(this.getModuleName());return e.debug("no Analytics plugin configured"),Promise.resolve()}return this.plugin.enable()}disable(){if(!this.plugin){const e=new j(this.getModuleName());return e.debug("no Analytics plugin configured"),Promise.resolve()}return this.plugin.disable()}getPluggable(){return this.plugin}onHubCapsule(e){if(!this.plugin){const e=new j(this.getModuleName());return e.debug("no Analytics plugin configured"),Promise.resolve()}return this.plugin.onHubCapsule(e)}}const w=new y;var I;!function(e){e.SUCCESS="SUCCESS",e.FAILURE="FAILURE"}(I||(I={}));class O{static milliSeconds(e){return 1e3*e}static seconds(e){return e/1e3}static minutes(e){return O.seconds(e)/60}static hours(e){return O.minutes(e)/60}static days(e){return O.hours(e)/24}}class x{constructor(e){if(this._config=Object.assign({},x. defaultConfig,e),this._pluggables=[],this._config=this.dotToObject(this._config),this.checkConfig(),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.clear=this.clear.bind(this),this.getAllKeys=this.getAllKeys.bind(this),"object"==typeof window&&"function"==typeof window.addEventListener)try{window.addEventListener("beforeunload",this._onBrowserClose,!1)}catch(e){new j("Cache").warn("Failed to add event listener for beforeunload",e)}}static get defaultConfig(){const e={Cache:{capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:void 0}};return e}getModuleName(){return"Cache"}getPluggables(){return this._pluggables}addPluggable(e){if(e&&e.getCategory&&"Cache"===e.getCategory()){if(this._pluggables.find((t=>t.getProviderName()===e.getProviderName())))throw new Error(`Pluggable ${e.getProviderName()} has already been added.`);this._pluggables.push(e),e.configure(this._config.Cache)}}configure(e){const t=new j("Cache");return e?(this._config=Object.assign({},x. defaultConfig,e),this._config=this.dotToObject(this._config),t.log("configure Cache with",this._config),this.checkConfig(),this._pluggables.forEach((e=>{e.configure(this._config.Cache)})),this._config):this._config}get(e,t){const r=this.getPluggable(t),n=new j(`Cache.${r.getProviderName()}`);try{return Promise.resolve(r.get(e,t))}catch(e){return n.error(`Failed to get item from cache`,e),Promise.reject(e)}}put(e,t,r){const n=this.getPluggable(r),i=new j(`Cache.${n.getProviderName()}`);try{return Promise.resolve(n.put(e,t,r))}catch(e){return i.error(`Failed to put item into cache`,e),Promise.reject(e)}}remove(e,t){const r=this.getPluggable(t),n=new j(`Cache.${r.getProviderName()}`);try{return Promise.resolve(r.remove(e,t))}catch(e){return n.error(`Failed to remove item from cache`,e),Promise.reject(e)}}clear(e){const t=this.getPluggable(e),r=new j(`Cache.${t.getProviderName()}`);try{return Promise.resolve(t.clear(e))}catch(e){return r.error("Failed to clear cache",e),Promise.reject(e)}}getAllKeys(e){const t=this.getPluggable(e),r=new j(`Cache.${t.getProviderName()}`);try{return Promise.resolve(t.getAllKeys(e))}catch(e){return r.error("Failed to get all keys from cache",e),Promise.reject(e)}}_onBrowserClose(){this._pluggables.forEach((e=>{e.onRaiseCacheEvent("browser-close")}))}getPluggable(e){const t=new j("Cache"),r=e&&e.provider?e.provider:"AWSPinpointCache";if(this._pluggables.length<1)throw new Error("No cache pluggable is added");const n=this._pluggables.find((e=>e.getProviderName()===r));if(void 0===n){if("AWSPinpointCache"===r)throw new Error("No cache pluggable is added");throw new Error(`Pluggable ${r} is not added.`)}return t.debug(`using provider ${r}`),n}checkConfig(){const e=new j("Cache");if("number"!=typeof this._config.Cache.capacityInBytes)throw e.error("capacityInBytes should be a number."),new Error("capacityInBytes should be a number.");if("number"!=typeof this._config.Cache.itemMaxSize)throw e.error("itemMaxSize should be a number."),new Error("itemMaxSize should be a number.");if(this._config.Cache.itemMaxSize>this._config.Cache.capacityInBytes)throw e.error("itemMaxSize should be smaller than capacityInBytes."),new Error("itemMaxSize should be smaller than capacityInBytes.");if("number"!=typeof this._config.Cache.defaultTTL)throw e.error("defaultTTL should be a number."),new Error("defaultTTL should be a number.");if("number"!=typeof this._config.Cache.defaultPriority)throw e.error("defaultPriority should be a number."),new Error("defaultPriority should be a number.");if(this._config.Cache.defaultPriority<1||this._config.Cache.defaultPriority>5)throw e.error("defaultPriority should be between 1 and 5."),new Error("defaultPriority should be between 1 and 5.");if("number"!=typeof this._config.Cache.warningThreshold)throw e.error("warningThreshold should be a number."),new Error("warningThreshold should be a number.");if(this._config.Cache.warningThreshold>1||this._config.Cache.warningThreshold<0)throw e.error("warningThreshold should be between 0 and 1."),new Error("warningThreshold should be between 0 and 1.")}dotToObject(e){const t=Object.assign({},e);for(const r in t){if(!t.hasOwnProperty(r))continue;if(r.indexOf(".")!==-1){const e=r.split("."),n=e.shift();if(void 0===t[n]||"object"!=typeof t[n])t[n]={};t[n]=this.dotToObject(Object.assign({[e.join(".")]:t[r]},t[n])),delete t[r]}}return t}}const S=new x;class j{constructor(e,t=i.WARN){this.name=e,this._logger=new a(e),this._pluggables=[],this.level=t}static clear(){j._buffer.splice(0),j._pluggables.forEach((e=>{e.clear()}))}static addPluggable(e){if(e&&e.getCategory&&"Logger"===e.getCategory()){if(j._pluggables.find((t=>t.getProviderName()===e.getProviderName())))throw new Error(`Pluggable ${e.getProviderName()} has already been added.`);j._pluggables.push(e),e.configure(j._config),j._buffer.forEach((t=>e.log(t)))}else console.error("This pluggable cannot be added.",e)}getPluggables(){return this._pluggables}addPluggable(e){if(e&&e.getCategory&&"Logger"===e.getCategory()){if(this._pluggables.find((t=>t.getProviderName()===e.getProviderName())))throw new Error(`Pluggable ${e.getProviderName()} has already been added.`);this._pluggables.push(e),e.configure(this.dotToObject(j._config))}else console.error("This pluggable cannot be added.",e)}configure(e){e&&e.Logger&&(j._config=Object.assign({},j._config,e.Logger),j._pluggables.forEach((e=>{e.configure(this.dotToObject(j._config))})))}_log(e,t){const r=new Date,n=j._pluggables;if(n.length>0){const a={message:t.map((e=>"object"==typeof e?JSON.stringify(e):e)).join(" "),logLevel:e,timestamp:r.getTime()};n.forEach((e=>e.log(a)))}else{const r={logLevel:e,msg:t.map((e=>"object"==typeof e?JSON.stringify(e):e)).join(" ")};j._buffer.push(r),j._buffer.length>j._bufferSize&&j._buffer.splice(0,1)}this._logger.log(e,t)}log(e,t){"function"==typeof t&&(t=t());const r=this.level;if(i.VERBOSE===r)this._log(e,t);else{if(i.DEBUG===r){if(e===i.DEBUG||e===i.INFO||e===i.WARN||e===i.ERROR)this._log(e,t)}else if(i.INFO===r){if(e===i.INFO||e===i.WARN||e===i.ERROR)this._log(e,t)}else if(i.WARN===r){if(e===i.WARN||e===i.ERROR)this._log(e,t)}else i.ERROR===r&&e===i.ERROR&&this._log(e,t)}}debug(...e){this.log(i.DEBUG,[...e])}info(...e){this.log(i.INFO,[...e])}warn(...e){this.log(i.WARN,[...e])}error(...e){this.log(i.ERROR,[...e])}verbose(...e){this.log(i.VERBOSE,[...e])}dotToObject(e){const t=Object.assign({},e);for(const r in t){if(!t.hasOwnProperty(r))continue;if(r.indexOf(".")!==-1){const e=r.split("."),n=e.shift();if(void 0===t[n]||"object"!=typeof t[n])t[n]={};t[n]=this.dotToObject(Object.assign({[e.join(".")]:t[r]},t[n])),delete t[r]}}return t}}j._buffer=[],j._bufferSize=1024,j._pluggables=[],j._config={};const k=new p;var M,$,D;!function(e){e.API="API",e.Auth="Auth",e.Credentials="Credentials",e.Storage="Storage",e.Analytics="Analytics",e.Interactions="Interactions",e.Logger="Logger"}(M||(M={})),function(e){e.Amazon="Amazon",e.Facebook="Facebook",e.Google="Google"}(D||(D={}));class L{constructor(){this._config={},this._pluggables=[],this._cancelToken=void 0}getModuleName(){return"Credentials"}getPluggables(){return this._pluggables}addPluggable(e){e.getCategory&&"Credentials"===e.getCategory()&&(this._pluggables.length>0?new j("Credentials").warn("Credentials utility has been configured, addPluggable cannot be called anymore."):this._pluggables.push(e))}configure(e){return this._config=Object.assign({},this._config,e),s.register("core",this.handleHubEvent.bind(this)),this.get(),this._config}get(){return this._cancelToken=new AbortController,this._getCredentials(this._cancelToken.signal)}currentCredentials(){return this.get()}shear(e){const t=Object.assign({},e);return delete t.Credentials,t}set(e){return this._config=Object.assign({},this._config,e),this.get()}clear(){return this._config=Object.assign({}),this._cancelToken&&this._cancelToken.abort(),Promise.resolve()}handleHubEvent(e){const{payload:t}=e;switch(t.event){case"signIn":this.get();break;case"signOut":this.clear();break;default:return}}async _getCredentials(e){const t=new j(this.getModuleName());if(this._pluggables.length>0)return this._pluggables[0].get(e);t.debug("no credentials provider");const{Auth:r}=this._config;if(!r)return t.debug("Auth module not configured"),Promise.reject(new Error("Auth module not configured"));const n=new E;return n.configure(this._config),n.currentCredentials()}}const E=class{constructor(e){s.register("auth",k.onHubCapsule),this._config=Object.assign({},e),new j("AuthClass").debug("Auth config is",this._config),this.G=new g({}),this.G.subscribe(this._config)}getModuleName(){return"Auth"}configure(e){if(!e)return this._config||{};const t=new j(this.getModuleName());return this._config=Object.assign({},this._config,e.Auth,e),t.debug("configure Auth",this._config),this._pluggables&&this._pluggables.length>0||(this._pluggables=[],this.getPluggable("AWSCognitoAuthPluggable").configure(this._config)),this._pluggables.forEach((e=>{e.configure(this._config)})),this._config}addPluggable(e){e&&e.getCategory&&"Auth"===e.getCategory()&&(this._pluggables.push(e),e.configure(this._config))}getPluggable(e){const t=this._pluggables.find((t=>t.getProviderName()===e));if(t)return t;const r=T.getPluggable(e);return r?("Auth"===r.getCategory()&&this._pluggables.push(r),r):void 0}removePluggable(e){const t=this._pluggables.findIndex((t=>t.getProviderName()===e));-1!==t&&this._pluggables.splice(t,1)}signUp(e){const t="object"==typeof e?e.username:arguments[0],r="object"==typeof e?e.password:arguments[1],n="object"==typeof e?e.attributes:arguments[2],i=n,a="object"==typeof e?e.validationData:arguments[3];return this.getPluggable("AWSCognitoAuthPluggable").signUp(t,r,i,a)}signIn(e,t){const r="object"==typeof e?e.username:arguments[0],n="object"==typeof e?e.password:arguments[1],i="object"==typeof e?e.validationData:arguments[2];return this.getPluggable("AWSCognitoAuthPluggable").signIn(r,n,i)}confirmSignIn(e,t,r){return this.getPluggable("AWSCognitoAuthPluggable").confirmSignIn(e,t,r)}resendSignUp(e){return this.getPluggable("AWSCognitoAuthPluggable").resendSignUp(e)}confirmSignUp(e,t,r){const n="object"==typeof r?r.forceAliasCreation:r;return this.getPluggable("AWSCognitoAuthPluggable").confirmSignUp(e,t,{forceAliasCreation:n})}signOut(e){return this.getPluggable("AWSCognitoAuthPluggable").signOut(e)}changePassword(e,t,r){return this.getPluggable("AWSCognitoAuthPluggable").changePassword(e,t,r)}forgotPassword(e){return this.getPluggable("AWSCognitoAuthPluggable").forgotPassword(e)}forgotPasswordSubmit(e,t,r){return this.getPluggable("AWSCognitoAuthPluggable").forgotPasswordSubmit(e,t,r)}verifyCurrentUserAttribute(e){return this.getPluggable("AWSCognitoAuthPluggable").verifyCurrentUserAttribute(e)}verifyCurrentUserAttributeSubmit(e,t){return this.getPluggable("AWSCognitoAuthPluggable").verifyCurrentUserAttributeSubmit(e,t)}updateUserAttributes(e,t){return this.getPluggable("AWSCognitoAuthPluggable").updateUserAttributes(e,t)}completeNewPassword(e,t,r){return this.getPluggable("AWSCognitoAuthPluggable").completeNewPassword(e,t,r)}setPreferredMFA(e,t){return this.getPluggable("AWSCognitoAuthPluggable").setPreferredMFA(e,t)}currentAuthenticatedUser(e){return this.getPluggable("AWSCognitoAuthPluggable").currentAuthenticatedUser(e)}currentSession(e){return this.getPluggable("AWSCognitoAuthPluggable").currentSession(e)}currentUserPoolUser(e){return this.getPluggable("AWSCognitoAuthPluggable").currentUserPoolUser(e)}currentUserInfo(){return this.getPluggable("AWSCognitoAuthPluggable").currentUserInfo()}currentCredentials(){const e=new L;return e.configure(this._config),e.get()}federatedSignIn(e){if(e&&"object"==typeof e)return e.customState?this.getPluggable("AWSCognitoAuthPluggable").federatedSignIn(e.provider,e.token,e.user,e.customState):this.getPluggable("AWSCognitoAuthPluggable").federatedSignIn(e.provider,e.token,e.user);let t,r,n;const i=e;return i&&Object.values(D).includes(i)?(t=arguments[1],r=arguments[2],n=arguments[3]):(t=arguments[0],r=arguments[1],n=arguments[2]),this.getPluggable("AWSCognitoAuthPluggable").federatedSignIn(i,t,r,n)}essentialCredentials(e){return this.getPluggable("AWSCognitoAuthPluggable").getCredentials(e)}setMFA(e,t){return this.getPluggable("AWSCognitoAuthPluggable").setMFA(e,t)}};class C{getModuleName(){return"Interactions"}}class P{getModuleName(){return"I18n"}addPluggable(e){}configure(e){return{}}get(e,t){return e}of(e){return}on(e,t){}plural(e,t,r){return""}getLocale(){return""}setLocale(e){}}const _=class{constructor(){this.G=new g({}),s.register("datastore",this.onHubCapsule.bind(this),this.constructor.name)}getModuleName(){return"DataStore"}configure(e){if(this.config)return this.config;this.config=e;const t=T.getPluggable("aws-amplify-datastore");return t?(this.datastore=t,this.datastore.start(this.config)):(new j("DataStore").error("No datastore pluggable is added to Amplify"),Promise.reject("No datastore pluggable is added to Amplify")),this.config}getPluggable(){return this.datastore}clear(){return this.datastore.clear()}start(){return this.datastore.start(this.config)}stop(){return this.datastore.stop()}query(...e){return this.datastore.query(...e)}save(...e){return this.datastore.save(...e)}delete(...e){return this.datastore.delete(...e)}observe(...e){return this.datastore.observe(...e)}observeQuery(...e){return this.datastore.observeQuery(...e)}onHubCapsule(e){this.G.send("datastore",e.payload)}};class N{constructor(){this._pluggables=[]}getModuleName(){return"PubSub"}getPluggables(){return this._pluggables}addPluggable(e){if(e&&"PubSub"===e.getCategory()){if(this._pluggables.find((t=>t.getProviderName()===e.getProviderName())))throw new Error(`Pluggable ${e.getProviderName()} has already been added.`);this._pluggables.push(e),e.configure(this._config)}return}configure(e){return this._config=Object.assign({},e),this._pluggables.forEach((e=>{e.configure(this._config)})),this._config}publish(e,t,r){return this._pluggables.map((n=>n.publish(e,t,r)))}subscribe(e,t){return{subscribe:r=>{const n=this._pluggables.map((n=>{const i=Object.assign({},t,r);return n.subscribe(e,i)}));return{unsubscribe:()=>{n.forEach((e=>e.unsubscribe()))}}}}}}const A=class{constructor(e){this._config=Object.assign({},e),this._pluggables=[],this.G=new g({}),new j("StorageClass").debug("Storage config is",this._config)}getModuleName(){return"Storage"}configure(e){const t=new j(this.getModuleName());if(!e)return this._config;t.debug("configure Storage",e),this._config=Object.assign({},this._config,e.Storage,e),this._pluggables.forEach((e=>{e.configure(this._config)})),this._config}addPluggable(e){e&&e.getCategory&&"Storage"===e.getCategory()&&(this._pluggables.length>0?t.error("Storage has already been configured with a pluggable. Please check your configuration."):this._pluggables.push(e),e.configure(this._config))}getPluggable(e){if(this._pluggables.length>1)throw new Error("Multiple pluggables are not supported by this category.");const r=this._pluggables.find((t=>t.getProviderName()===e));if(r)return r;const n=T.getPluggable(e);return n?("Storage"===n.getCategory()&&this._pluggables.push(n),n):void 0}removePluggable(e){const t=this._pluggables.findIndex((t=>t.getProviderName()===e));-1!==t&&this._pluggables.splice(t,1)}get(e,t){return this.getPluggable("AWSS3Provider").get(e,t)}put(e,t,r){return this.getPluggable("AWSS3Provider").put(e,t,r)}remove(e,t){return this.getPluggable("AWSS3Provider").remove(e,t)}list(e,t){return this.getPluggable("AWSS3Provider").list(e,t)}copy(e,t,r){return this.getPluggable("AWSS3Provider").copy(e,t,r)}};class R{getModuleName(){return"XR"}}const T=class{constructor(){this.Auth=new E,this.Analytics=w,this.Cache=S,this.Storage=new A,this.I18n=new P,this.Interactions=new C,this.PubSub=new N,this.XR=new R,this.DataStore=new _,this._components=[],this._config={},this._pluggables=[],this.Hub=s,this.Logger=j,this.Credentials=new L,this.version=r,this._ Amplify=this}getModuleName(){return"Amplify"}configure(e){if(!e)return this._config;const t=new j("Amplify");t.debug("configure called",e),this._config=Object.assign(this._config,e);const a=new E,o=new A,c=new P,l=new N,u=w,d=S,f=new C,m=new _,h=new R,p=new L;return a.configure(this._config),o.configure(this._config),c.configure(this._config),l.configure(this._config),u.configure(this._config),d.configure(this._config),f.configure(this._config),m.configure(this._config),h.configure(this._config),p.configure(this._config),this._pluggables.forEach((e=>{t.debug("configuring pluggable "+e.getModuleName());const r=this._config[e.getModuleName()];e.configure(r),Object.values(n).includes(e.getModuleName())||Object.assign(this,{[e.getModuleName()]:e})})),this._config}register(e){const t=new j("Amplify");if(!e.getModuleName){return void t.error("Invalid pluggable. Must have getModuleName()",e)}if(this[e.getModuleName()]&&this[e.getModuleName()][e.getProviderName()]){return void t.error("Pluggable "+e.getProviderName()+" has already been registered.")}t.debug("registering pluggable "+e.getModuleName());const r=e.getModuleName();if(this[r]){const t=this._config[r];this[r].addPluggable(e),e.configure(t)}else this.addPluggable(e);t.debug("pluggable registered")}addPluggable(e){if(this._pluggables.find((t=>t.getModuleName()===e.getModuleName())))throw new Error("Pluggable "+e.getModuleName()+" has already been added.");this._pluggables.push(e);const t=this._config[e.getModuleName()];e.configure(t),Object.values(n).includes(e.getModuleName())||Object.assign(this,{[e.getModuleName()]:e})}getPluggable(e){return this._pluggables.find((t=>t.getProviderName()===e))}removePluggable(e){const t=this._pluggables.find((t=>t.getProviderName()===e));if(t){const r=t.getModuleName();this._pluggables=this._pluggables.filter((r=>r.getProviderName()!==e)),this[r]&&this[r].removePluggable&&this[r].removePluggable(e)}};return t})()}));
  </script>
  
  <style>
    .admin-section { display: none; }
    .admin-section.active { display: block; }
    .toast { position: fixed; right: 1rem; top: 1rem; padding: 0.75rem 1rem; border-radius: 0.5rem; background: #111827; color: #fff; opacity: 0; transition: opacity .2s ease, transform .2s ease; transform: translateY(-8px); z-index: 100; }
    .toast.show { opacity: 1; transform: translateY(0); }
    .toast.success { background: #065f46; }
    .toast.error { background: #991b1b; }
    .toast.info { background: #1f2937; }
    .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 90; opacity: 0; pointer-events: none; transition: opacity .2s ease; }
    .modal-overlay.active { opacity: 1; pointer-events: auto; }
  </style>
</head>
<body class="min-h-screen bg-gray-50 text-gray-900">
  <div id="toast-container" class="toast" role="status" aria-live="polite"></div>

  <div class="w-full max-w-5xl mx-auto p-4 sm:p-6 lg:p-8">
    <header class="flex items-center justify-between pb-4 border-b border-gray-200">
      <h1 class="text-2xl font-semibold tracking-tight">‡§á‡§µ‡•á‡§Ç‡§ü ‡§ó‡•à‡§≤‡§∞‡•Ä ‡§è‡§°‡§Æ‡§ø‡§®</h1>
      <button id="logoutBtn" class="hidden px-3 py-2 rounded-xl bg-gray-900 text-white text-sm hover:bg-black">‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü</button>
    </header>

    <!-- Login Section -->
    <section id="loginSection" class="admin-section active">
        <div class="grid gap-6 max-w-md mt-6">
            <div class="bg-white rounded-2xl shadow p-6">
              <h2 class="text-lg font-medium mb-4">‡§≤‡•â‡§ó‡§ø‡§®</h2>
              <div class="grid gap-3">
                <label class="text-sm">‡§à‡§Æ‡•á‡§≤</label>
                <input id="email" type="text" class="px-3 py-2 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-900" placeholder="you@example.com" />
                <label class="text-sm mt-2">‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°</label>
                <input id="password" type="password" class="px-3 py-2 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-900" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
                <button id="loginBtn" class="mt-4 px-3 py-2 rounded-xl bg-gray-900 text-white hover:bg-black">‡§≤‡•â‡§ó‡§ø‡§®</button>
              </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section id="dashboardSection" class="admin-section">
      <div class="mt-8">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-medium">‡§á‡§µ‡•á‡§Ç‡§ü‡•ç‡§∏</h2>
          <div class="flex items-center gap-2">
            <button id="openCreateEventModal" class="px-3 py-2 rounded-xl bg-indigo-600 text-white text-sm hover:bg-indigo-700">‡§®‡§Ø‡§æ ‡§á‡§µ‡•á‡§Ç‡§ü ‡§¨‡§®‡§æ‡§è‡§Å</button>
            <button id="refreshEvents" class="px-3 py-2 rounded-xl border border-gray-300 hover:bg-gray-100 text-sm">‡§∞‡§ø‡§´‡•ç‡§∞‡•á‡§∂</button>
          </div>
        </div>
        <div id="eventList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>
      </div>
    </section>

    <!-- Create Event Modal -->
    <div id="createEventModal" class="modal-overlay">
        <div class="bg-white rounded-2xl shadow-xl p-6 w-full max-w-md">
            <h3 class="text-lg font-medium mb-4">‡§®‡§Ø‡§æ ‡§á‡§µ‡•á‡§Ç‡§ü ‡§¨‡§®‡§æ‡§è‡§Å</h3>
            <label class="text-sm">‡§á‡§µ‡•á‡§Ç‡§ü ‡§ï‡§æ ‡§®‡§æ‡§Æ</label>
            <input id="newEventName" type="text" class="w-full mt-1 px-3 py-2 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-900" placeholder="‡§ú‡•à‡§∏‡•á, Diwali Celebration 2025" />
            <div class="flex gap-2 mt-4">
                <button id="createEventBtn" class="px-3 py-2 rounded-xl bg-gray-900 text-white hover:bg-black">‡§¨‡§®‡§æ‡§è‡§Å</button>
                <button id="cancelCreateEvent" class="px-3 py-2 rounded-xl border border-gray-300 hover:bg-gray-100">‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
            </div>
        </div>
    </div>
  </div>

  <script>
    window.onload = function() {
        console.log("Page loaded. Initializing app...");

        // ===== Config =====
        const qp = new URLSearchParams(location.search);
        const API_BASE = qp.get('api') || '';
        const COGNITO = {
            REGION: 'ap-southeast-1',
            USER_POOL_ID: 'ap-southeast-1_YGZSUnSf5',
            USER_POOL_WEB_CLIENT_ID: '1mecg9v8gfau80k08arpofgl4l'
        };

        // ===== Utilities =====
        function showToast(msg, type = 'info', ms = 3500) {
            const el = document.getElementById('toast-container');
            if (!el) return;
            el.className = 'toast ' + type;
            el.textContent = msg;
            requestAnimationFrame(() => el.classList.add('show'));
            setTimeout(() => el.classList.remove('show'), ms);
        }

        if (typeof aws_amplify === 'undefined' || !aws_amplify.Amplify) {
            console.error("CRITICAL: Embedded AWS Amplify library failed to load or is corrupted.");
            showToast('Amplify ‡§≤‡•ã‡§° ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§Ü‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§°‡§Æ‡§ø‡§® ‡§∏‡•á ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§', 'error', 10000);
            return;
        }
        
        const { Amplify, Auth } = aws_amplify;

        async function authFetch(path, options = {}) {
            if (!API_BASE) {
                showToast('API URL ‡§ï‡•â‡§®‡•ç‡§´‡§º‡§ø‡§ó‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ URL ‡§Æ‡•á‡§Ç ?api=... ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§', 'error');
                throw new Error('API URL is not configured.');
            }
            try {
                const session = await Auth.currentSession();
                const idToken = session.getIdToken().getJwtToken();
                
                const headers = { ...options.headers, 'Authorization': idToken, 'Content-Type': 'application/json' };
                const response = await fetch(`${API_BASE}${path}`, { ...options, headers });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({ message: 'Request failed' }));
                    throw new Error(errorData.message || `HTTP error! status: ${response.status}`);
                }
                return response.json();
            } catch (error) {
                console.error("authFetch Error:", error);
                throw error;
            }
        }

        const loginSection = document.getElementById('loginSection');
        const dashboardSection = document.getElementById('dashboardSection');
        const eventList = document.getElementById('eventList');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const refreshEvents = document.getElementById('refreshEvents');
        const createEventModal = document.getElementById('createEventModal');
        const openCreateEventModal = document.getElementById('openCreateEventModal');
        const cancelCreateEvent = document.getElementById('cancelCreateEvent');
        const createEventBtn = document.getElementById('createEventBtn');
        const newEventName = document.getElementById('newEventName');
        
        function showSection(section) {
            document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
            section.classList.add('active');
        }

        async function doLogin() {
            loginBtn.disabled = true;
            loginBtn.textContent = "‡§≤‡•â‡§ó‡§ø‡§® ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...";
            try {
                await Auth.signIn(emailInput.value.trim(), passwordInput.value);
                await checkUserSession();
                showToast('‡§≤‡•â‡§ó‡§ø‡§® ‡§∏‡§´‡§≤', 'success');
            } catch (error) {
                console.error('Login error', error);
                showToast(error.message || '‡§≤‡•â‡§ó‡§ø‡§® ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø', 'error');
            } finally {
                loginBtn.disabled = false;
                loginBtn.textContent = "‡§≤‡•â‡§ó‡§ø‡§®";
            }
        }
        
        async function loadEvents() {
            eventList.innerHTML = '<div class="text-center col-span-full p-8 text-gray-500">‡§á‡§µ‡•á‡§Ç‡§ü‡•ç‡§∏ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...</div>';
            try {
                const data = await authFetch('/events');
                renderEvents(data.events || []);
            } catch (error) {
                showToast('‡§á‡§µ‡•á‡§Ç‡§ü‡•ç‡§∏ ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤: ' + error.message, 'error');
                eventList.innerHTML = `<div class="text-center col-span-full p-8 text-red-500">‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ${error.message}</div>`;
            }
        }
        
        function renderEvents(items) {
            eventList.innerHTML = '';
            if (!items || items.length === 0) {
                eventList.innerHTML = '<div class="text-center col-span-full p-8 text-gray-500">‡§ï‡•ã‡§à ‡§á‡§µ‡•á‡§Ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§ ‡§è‡§ï ‡§®‡§Ø‡§æ ‡§¨‡§®‡§æ‡§è‡§Å!</div>';
                return;
            }
            items.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            for (const item of items) {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-2xl shadow p-5 flex flex-col gap-3';
                card.innerHTML = `
                    <div class="flex-1">
                        <div class="text-base font-semibold">${item.name}</div>
                        <div class="text-xs text-gray-400 mt-1">ID: ${item.id}</div>
                    </div>
                    <button class="w-full px-3 py-2 rounded-xl bg-gray-900 text-white hover:bg-black text-sm" onclick="alert('‡§Ü‡§™‡§ï‡§æ ‡§´‡•ã‡§ü‡•ã ‡§Ö‡§™‡§≤‡•ã‡§° ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§Ø‡§π‡§æ‡§Å ‡§á‡§Ç‡§ü‡•Ä‡§ó‡•ç‡§∞‡•á‡§ü ‡§π‡•ã‡§ó‡§æ‡•§ Event ID: ${item.id}')">‡§´‡§º‡•ã‡§ü‡•ã ‡§Ö‡§™‡§≤‡•ã‡§°</button>`;
                eventList.appendChild(card);
            }
        }

        async function handleCreateEvent() {
            const name = newEventName.value.trim();
            if (!name) { return showToast('‡§ï‡•É‡§™‡§Ø‡§æ ‡§á‡§µ‡•á‡§Ç‡§ü ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç', 'error'); }
            createEventBtn.disabled = true;
            try {
                await authFetch('/events', { method: 'POST', body: JSON.stringify({ name }) });
                showToast('‡§á‡§µ‡•á‡§Ç‡§ü ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§¨‡§® ‡§ó‡§Ø‡§æ', 'success');
                newEventName.value = '';
                createEventModal.classList.remove('active');
                await loadEvents();
            } catch (error) {
                showToast('‡§á‡§µ‡•á‡§Ç‡§ü ‡§¨‡§®‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§´‡§≤: ' + error.message, 'error');
            } finally {
                createEventBtn.disabled = false;
            }
        }

        async function checkUserSession() {
            try {
                await Auth.currentAuthenticatedUser();
                logoutBtn.classList.remove('hidden');
                showSection(dashboardSection);
                await loadEvents();
            } catch (e) {
                logoutBtn.classList.add('hidden');
                showSection(loginSection);
            }
        }
        
        loginBtn.addEventListener('click', doLogin);
        logoutBtn.addEventListener('click', async () => { await Auth.signOut(); checkUserSession(); });
        refreshEvents.addEventListener('click', loadEvents);
        openCreateEventModal.addEventListener('click', () => createEventModal.classList.add('active'));
        cancelCreateEvent.addEventListener('click', () => createEventModal.classList.remove('active'));
        createEventBtn.addEventListener('click', handleCreateEvent);
        
        Amplify.configure({ Auth: COGNITO });
        checkUserSession();
    };
  </script>
</body>
</html>
